UTAU Plugin 拡張エンベロープエディタ Version 1.62

■概要
　複数の音符のエンベロープをまとめて編集するエンベロープエディタです。
　クロスフェード部分を保護したまま、エンベロープを調整することができます。

■注意
　制御点を最大限有効に使用するために、以下の処理を強制的に行います。
　・p5v5が無効の場合、有効にし、p2v2とp3v3の中間点に配置します。
　・p1v1が共に0の場合、p1v1はp2v2の位置に移動し、p2v2はp1v1とp5v5の中間点に移動します。
　・p4v4が共に0の場合、p4v4はp3v3の位置に移動し、p3v3はp4v4とp5v5の中間点に移動します。

■使い方
　・エンベロープを編集する範囲の音符を選択し、拡張エンベロープエディタを
　　起動してください。
　・制御点をドラッグして移動することができます。
　・『□』の形の制御点は時間・音量とも自由に移動できます。ただし、
　　前後の制御点を越えて移動することはできません。
　・『｜』の形の制御点はクロスフェード用の制御点と判定されているため、音量
　　のみ調整できます。
　・『＋』の形の制御点は『固定制御点の調整』をチェックしたときに現れる
　　クロスフェード用の制御点で、時間方向にも動かすことができます。
　　この制御点を動かすと、先行発声・オーバーラップ・STPの値が変化します。
　・『−』の形の制御点は『固定制御点の調整』をチェックしたときに現れる
　　制御点で、エンベロープの最初と最後に付加される音量0の仮想の制御点です。
　　時間方向にのみ動かすことができます。
　　この制御点を動かすと、先行発声・オーバーラップ・STPの値が変化します。
　・『／』ボタンを押すと、直線編集モードになります。
　・『Ｆ』ボタンを押すと、フリーハンド編集モードになります。
　・『↑↓』ボタンを押すと、強弱編集モードになります。
　・『ばらす』ボタンを押すと、複数の制御点が同時刻に存在する場合、前後に
　　　ずらします。
　・『均等』ボタンを押すと、移動できる制御点を均等に配置します。
　・『音量=100』ボタンを押すと、音量を100%に統一します。このとき、最終的
　　な出力波形が変化しないようにエンベロープを調整します。
　・１，４番の制御点を右クリックすると、クロスフェード有無を切り替えること
    ができます。
　・『固定制御点の調整』チェックボックスを有効にすると、クロスフェードの位置
　　を変更したり、通常は移動できない制御点を移動することができるようになります。
　　この状態で制御点を移動すると、エンベロープだけではなく先行発声・オーバー
　　ラップ・STPの値も変更されます。

　　制御点を動かしたとき、エンベロープの線が赤くなることがあります。
　　これは、STPがマイナス値になっていることを表しており、この部分が無音となる
　　ため意図したクロスフェードにならない可能性があります。

  　制御点を動かしたとき、エンベロープの線が緑色になることがあります。
　　これは、オーバーラップでは無い先行発声部分が前の音符の半分を超えている
　　ことを表しており、超えた部分はUTAUエンジンにより自動で断ち切られるため、
　　意図した発音にならない可能性があります。

■クロスフェードの判定条件
　以下の条件に合致する制御点はクロスフェードに使用されていると判定し、時間
　方向の移動が制限されます。
　・前の音符のp4が次の音符のオーバーラップと同一である
　・次の音符のp1が次の音符のオーバーラップと同一である

■履歴
・2009/10/12	ver1.00	リリース
                ver1.01 フリーハンドツール使用時のちらつきを抑えた
　　　　　　　　　　　　制御点移動時にエラーが出る不具合を修正
　　　　　　　　　　　　スクロール範囲の最適化
　　　　　　　　　　　　音符が描画されないことがある不具合を修正
　　　　　　　　ver1.02 クロスフェード判定処理の改善
　　　　　　　　　　　　音量を100に統一する機能を追加
                ver1.03 前の音符が無い場合に描画位置がずれる不具合を修正
                ver1.04 前回のスクロールバーの位置に戻らない不具合を修正
・2009/10/15    ver1.10 右クリックによるクロスフェード有無切り替え機能を追加
                ver1.11 端の音符のクロスフェード有無切り替え時にエラーが発生
　　　　　　　　　　　　する不具合を修正
                ver1.20 強弱編集モード追加
　　　　　　　　　　　　画面のちらつきを改善
・2009/10/15    ver1.21 編集したエンベロープが正しく適用されない場合がある不具合を修正
                        クロスフェード切り替えに失敗したとき、制御点を移動しないようにした
・2009/10/18    ver1.22 音量0%の音符のエンベロープを編集するとエラーとなる不具合を修正
・2009/11/04	ver1.30 固定制御点の調整機能を追加。
						休符にオーバーラップが設定されている場合のエンベロープ表示の
　　　　　　　　　　　　不具合を修正
・2009/11/05	ver1.31 クロスフェード有無を切り替えたとき、音量が変化する不具合を修正
　　　　　　　　　　　　STPの精度を小数点以下3桁までとした
・2009/11/06    ver1.32 設定したクロスフェードが解除されていることがある不具合を修正
                        （先行発声、オーバーラップの精度を強制的にミリ秒とするようにした）
・2009/11/07    ver1.33 UTAUエンジンによる先行発声の断ち切り対象となる場合、線の色を変え
　　　　　　　　　　　　るようにした
・2009/11/15    ver1.34 prefix.mapを考慮するようにした
・2009/11/30    ver1.35 UTAUのD&Dインストールに対応した
　　　　　　　　　　　　『ばらす』ボタンで固定制御点を動かさないようにした
　　　　　　　　　　　　『ばらす』でばらす幅を5msから10msに変更
　　　　　　　　　　　　右クリックのクロスフェード化が動かないことがある不具合を修正
・2009/12/20    ver1.37 使用する原音設定の優先順位の誤りを修正
・2010/01/02    ver1.38 設定の保存先をINIファイルからレジストリに変更(vista対応)
・2010/01/15    ver1.40 子音速度に対応
・2010/01/20    ver1.41 クロスフェード判定条件を緩くした(|OverLap - Env| < 2ms)
　　　　　　　　　　　　stpのマイナス判定条件と自動調整判定条件を厳しくした(+1ms)
・2010/01/23    ver1.42 保存時の端数処理の不具合を修正
・2010/02/04    ver1.50 先行発声が自動調整されているエンベロープを編集できるようにした
                ver1.51 先行発声が自動調整されているとき、stpが正しく計算されない不具合を修正
・2010/02/06    ver1.60 アンドゥ、リドゥを実装した
・2013/08/01    ver1.61 エンベロープの値が小数の場合エラーとなる不具合を修正
・2013/08/09    ver1.61 歌詞表示の以上を修正


■最新版入手先
　ZteerのUTAU関連物置き場
　http://z-server.game.coocan.jp/utau/utautop.html

■連絡先
 不具合報告などは作者へのメールか互助会BBSスレッドまでご連絡ください。

・互助会BBSプラグインスレッド
  http://jbbs.livedoor.jp/bbs/read.cgi/computer/41650/1255320427/

・作者（Zteer）メール
　BC_701@hotmail.com

